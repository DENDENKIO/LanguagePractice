<UserControl x:Class="LanguagePractice.Views.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid Margin="20">
        <StackPanel>
            <TextBlock Text="設定 (Settings)" FontSize="24" FontWeight="Bold" Margin="0,0,0,20"/>

            <!-- AI URL設定 -->
            <GroupBox Header="AIサイト接続設定" Padding="10" Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="プリセットから選択:" Margin="0,0,0,5"/>
                    <ComboBox ItemsSource="{Binding AiSites}"
                              SelectedItem="{Binding SelectedAiSite}"
                              DisplayMemberPath="Name"
                              Height="28"
                              Margin="0,0,0,10"/>

                    <TextBlock Text="使用するAIサイトのURL (編集可):" Margin="0,0,0,5"/>
                    <TextBox Text="{Binding AiUrl}" Padding="5" FontSize="14"/>

                    <TextBlock Text="{Binding AutoModeHint}"
                               Foreground="Gray" FontSize="11" Margin="0,6,0,0"
                               TextWrapping="Wrap"/>

                    <!-- 自動モード設定 -->
                    <CheckBox IsChecked="{Binding IsAutoMode}" Margin="0,15,0,5">
                        <TextBlock Text="実験的機能：ブラウザ自動操作モード (Beta)" FontWeight="Bold"/>
                    </CheckBox>
                    <TextBlock Text="ONにすると、アプリ内ブラウザ(WebView2)でAIサイトを開き、プロンプトの自動入力と送信を試みます。サイトUI変更やログイン状態により失敗することがあります。"
                               Foreground="Gray" FontSize="11" Margin="20,0,0,10" TextWrapping="Wrap"/>

                    <Button Content="設定を保存" Command="{Binding SaveCommand}"
                            Width="120" Height="30" HorizontalAlignment="Right" Margin="0,10,0,0"/>
                </StackPanel>
            </GroupBox>

            <!-- バックアップ -->
            <GroupBox Header="データ管理" Padding="10">
                <StackPanel>
                    <TextBlock Text="データベースのバックアップ:" Margin="0,0,0,5"/>
                    <TextBlock Text="現在のデータをファイルとして保存します。PCの移行や不測の事態に備えて定期的に保存してください。"
                               Foreground="Gray" FontSize="12" Margin="0,0,0,10" TextWrapping="Wrap"/>

                    <Button Content="DBをバックアップ保存" Command="{Binding BackupDbCommand}"
                            Background="#4CAF50" Foreground="White" FontWeight="Bold"
                            Width="200" Height="40" HorizontalAlignment="Left"/>
                </StackPanel>
            </GroupBox>
        </StackPanel>
    </Grid>
</UserControl>
